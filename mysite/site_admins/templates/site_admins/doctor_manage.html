{% extends 'site_admins/home_page.html' %}

{% block main_content %}
    {% load static %}
    <!-- Thẻ content bọc lại toàn bộ phần search + sort + results -->
    <div class="fixed-menu " style="display:none">
        <div class="menu-item">
            <a href="#">Home</a>
        </div>
        <span class = "line"></span>
        <div class="menu-item">
            <div>Xuất file</div>
        </div>
        <div class="export-file-menu">
            <div class="export-report">
                <div>
                    <span>Xuất báo cáo</span>
                    <select name="type_ex" id="ex-report-selection">
                        <option value="report">Báo cáo</option>
                        <option value="list-file">Danh sách</option>
                    </select>
                </div>
                <button>Xuất</button>
            </div>
            <div class="export-list">
                <div>
                    <span>Xuất danh sách</span>
                    <select name="type_ex" id="ex-report-selection">
                        <option value="report">Báo cáo</option>
                        <option value="list-file">Danh sách</option>
                    </select>
                </div>
                <div>
                    <select name="file-type" id="file-type-selection">
                        <option value="excel">.xlxs</option>
                        <option value="txt">.txt</option>
                    </select>
                    <select name="number-row" id="number-row">
                        <option value="one-pag">1 trang đầu</option>
                        <option value="two-pag">2 trang đầu</option>
                        <option value="50-row">50 mục đầu</option>
                    </select>
                </div>
                <button>Xuất</button>
            </div>
        </div>
    </div>
    <div class ="content">
        <!-- Bo loc, click vao de chon va dua vao bo loc -->
        <div class="search-filter">
            <div class = "search-box">
                <input type="text" id = "search-request-text">
                <button id="search-submit-btn">Tìm</button>
            </div>
            <br>
            <div class = "items-chose-display-area"></div>
            <div class="search-filter__items">
                <p>Tuổi</p>
                <div class="items-container">
                    <div class="search-filter__item">
                        <input type="checkbox", name = "age" class="search-filter__item-checkbox" id = "group_1" value = "group_1">
                        <label for="group_1">'<'25</label>
                    </div>
                    <div class="search-filter__item">
                        <input type="checkbox", name = "age" class="search-filter__item-checkbox" id = "group_2" value = "group_2">
                        <label for="group_2">25-40</label>
                    </div>
                    <div class="search-filter__item">
                        <input type="checkbox", name = "age" class="search-filter__item-checkbox" id = "group_3" value = "group_3">
                        <label for="group_3">'>40'</label>
                    </div>
                </div>
            </div>
            <div class="search-filter__items">
                <p>Giới tính</p>
                <div class="items-container">
                    <div class="search-filter__item">
                        <input type="checkbox", name = "gender" class="search-filter__item-checkbox" id = "man-gender" value = "man">
                        <label for="man-gender">Nam</label>
                    </div>
                    <div class="search-filter__item">
                        <input type="checkbox", name = "gender" class="search-filter__item-checkbox" id = "woman-gender" value = "woman">
                        <label for="woman-gender">Nữ</label>
                    </div>
                    <div class="search-filter__item">
                        <input type="checkbox", name = "gender" class="search-filter__item-checkbox" id = "undefined-gender" value = "undefined">
                        <label for="undefined-gender">Không xác định</label>
                    </div>
                </div>
            </div>
            <div class="search-filter__items">
                <span class="province-expand-btn">Tỉnh thành</span>
                <div class="items-container">
                    {% for province in provinces %}
                        <div class="search-filter__item">
                            <input type="checkbox", name = "province" id = {{province.0}} value = {{province.0}}>
                            <label for={{province.0}}>{{province.1}}</label>
                        </div>
                    {% endfor %}
                    <span class="province-expand-btn">A</span>
                </div>
                
                <!-- <div class="items-containers">
                    <div class="search-filter__item">
                        input
                    </div>
                </div> -->
            </div>
            <div class="search-filter__items">
                <span>Chuyên ngành</span>
                <div class="items-container">
                    {% for spec in spec_labels %}
                        <div class = "search-filter__item">
                            <input type="checkbox", name = "spec", id = {{spec.0}} value = {{spec.0}}>
                            <label for = {{spec.0}}>{{spec.1}}</label>
                        </div>
                    {% endfor %}
                </div>
            </div>
            <!-- <div>
                <span>Thu nhập</span>
                <label for="doctor-income">Tu</label>
                <input type="number" name = "income" value = "income" class = "income-input" id = "doctor-income-lowest">
                <label for="doctor-income">den</label>
                <input type="number" name = "income" value = "income" class = "income-input" id = "doctor-income-highest">
            </div> -->
        </div>
        <!-- Phan tra ve ket qua, nhu trong canva gom header + content + footer -->
        <div class="wrapper doctor-wrapper" id = "doctor-wrapper">
            <!-- Header: head, bộ sắp xếp, tổng số result -->

            <!-- Phần content hiển thị kết quả tìm kiếm -->
            <div class="doctor-list" id="doctor-list" >
                <!-- {% for patient in page_results %}
                    <div class="patient-list__item">
                        <div>
                            <img src="{% static 'images/images_s.jpeg' %}" alt="Avatar patient" class = "patient-thumbnail">
                        </div>
                        <ul>
                            <li>{{patient}}</li>
                            <li>{{patient.phone}}</li>
                            <li>{{patient.address}}</li>
                            <li>{{patient.citizen_identification}}</li>
                        </ul>

                        <div class="overlay">
                            <div class="patient-details">
                                <h3>Thông tin chi tiết</h3>
                                <h4>ID: {{patient.id}}</h4>
                                <img src="{% static 'images/images_s.jpeg' %}" alt="Avartar" class = "patient-thumbnail-in-details">
                                <span>{{patient.username}}</span>
                                <span>{{patient.gender_choice}}, {{patient.date_of_birth}}</span>
                            </div>
                        </div>
                    </div>
                {% endfor %}-->
                <table id = "doctor-table">
                    <thead>
                        <tr role = "row"></tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            <div class="overlay">
                <div class="patient-details d-col-flex">
                    <div class = "d-row-flex">
                        <h3>Thông tin chi tiết</h3>
                        <i class="fa-regular fa-circle-xmark close-btn close-details"></i>
                    </div>
                    <div class = "d-row-flex patient-details-id">
                        <span class = "id"></span>
                        <i class="fa-regular fa-clipboard"></i>
                    </div>
                    <div>
                        <img src="{{patient.avatar.url}}" alt="Avartar" class = "patient-thumbnail-in-details">
                        <div class = "d-col-flex">
                            <span>username</span>
                            <div class = "d-row-flex">
                                <span>gender, birth</span>
                                <span>Tuổi: </span>
                            </div>
                        </div>
                        <div>
                            <span>Thông tin cá nhân</span>
                            <div class = "d-row-flex details-wrapper">
                                <span class = "cccd">CCCD/CMND: {{patient.citizen_identification}}</span>
                                <span class = "phone">Điện thoại: {{patient.phone}}</span>
                                <span class = "email">Email: {{patient.email}}</span>
                                <span class ="d_o_b">Ngày sinh: {{patient.date_of_birth}}</span>
                                <span class = "province">Quê quán: {{patient.province}}</span>
                                <span class = "address">Địa chỉ: {{patient.address}}</span>
                            </div>
                        </div>
                        <span>Tổng số cuộc hẹn đã hẹn:</span>
                        <span>Tổng số tiền thu được:</span>
                    </div>
                    <div>
                        <button class = "edit-profile-btn">Chỉnh sửa</button>
                        <button class = "delete-btn">Xóa </button>
                    </div>
                </div>
                <div class = "patient-details d-col-flex forms">
                    <form action="/ad/update-doctor-info/" method = "POST" enctype="multipart/form-data" id = "update-patient-info-f"> {% csrf_token %}
                        <div style = "display:none">
                            <input type= "number" class = "id-text" name = "id" id = "id-number">
                        </div>
                        <div class = "d-row-flex">
                            <h3>Chỉnh sửa thông tin</h3>
                            <i class='fa-regular fa-circle-xmark close-btn close-form-btn'></i>
                        </div>
                        <div>
                            <span >Tên</span>
                            <input type="text" class = "name-text" name = "name">
                        </div>
                        <div class = "d-col-flex">
                            <span>Avatar</span>
                            <input type = "file"  class = "avatar-file" name = "avatar">
                        </div>
                        <div class = "d-col-flex">
                            <span Địa chỉ></span>
                            <input type="text" class = "address-text" name = "address">
                        </div>
                        <div class="d-col-flex">
                            <span >Số điện thoại</span>
                            <input type="text" class = "phone-text" name = "address">
                        </div>
                        <div class = "d-col-flex">
                            <span>Trạng thái tài khoản:</span>
                            <div>
                                <input class = "account-status" type="checkbox" name="lock-status" id="status-checkbox">
                                <label for="status-checkbox">Khóa/Mở khóa</label>
                            </div>
                        </div>
                        <input type="submit" name = "save" class = "btn save-btn" value = "Lưu">
                    </form>
                    <div class = "confirm-form">
                        <span>Bạn có muốn lưu thông tin rồi thoát không?</span>
                        <i class='fa-regular fa-circle-xmark close-btn confirm-form__close-btn'></i>
                        <button class = "confirm-form__save-btn">Lưu</button>
                        <button class = "confirm-form__cancel-btn">Không</button>
                    </div>
                </div>
                <div id="my-alert" class="alert alert-success" style="display: none;">
                    <button type="button" class="close" data-dismiss="alert">&times;</button>
                    Thông báo của bạn đã được gửi đi thành công!
                </div>
            </div>
            </div>
            </div>

            <!-- <div class="page-counters" onclick="toggleActive(this)">0</div> -->
            <div class="patient-wrapper__footer">
                <div class="show-page">
                </div>
                <div class="number-page-box">
                </div>
                <div class="direct-page-block">
                    <!-- Button nhấn vào để tiến trang kế -->
                    <button class="bttn back-btn" id = "back-btn" data-page-results = {{page_results}}>
                        <!-- Kiểm tra có trang trước trang hiện tại không, nếu có thì direct tới trang đó, không thì disable -->
                        {% if page_results.has_previous %}
                            <a href="?page={{page_results.previous_page_number}}" class = "back-btn back-btn--active"><i class="fa-solid fa-chevron-left"></i></a>
                        {% else %}
                            <a href="#" class = "back-btn back-btn--disable"><i class="fa-solid fa-chevron-left"></i></a>
                        {% endif %}
                        <!-- trong href có thể sử dung if else để xuất url theo điều kiện -->
                        <!-- <a href="?page={{page_results.page}}"></a> -->
                    </button>
                    
                    <ul>
                        {% for page_num in page_range %}
                            <!-- Neu so trang hien tai trùng với số trang trong <li> thi se css trang trùng do len z (áp dung class active)
                                Số trang được xác định = page_obj.number, page_obj = paginator.get_page()-->
                            <a class ="page-num {% if page_results.number == page_num %}active{% endif %}" href="?page={{page_num}}">{{page_num}}</a>


                        {% endfor %}
                    </ul>
                    <div class = "bttn-wrapper" id = "next-btn--actived" data-page-results = {{page_results.number}}>
                        {% if page_results.has_next %}
                            <a href="?page={{page_results.next_page_number}}" class = "next-btn next-btn--active"><i class="fa-solid fa-chevron-right"></i></a>
                        {% else %}
                            <a href="#" class = "next-btn next-btn--disable"><i class="fa-solid fa-chevron-right"></i></a> 
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        <script>
            var fullHeightDiv = document.getElementById("doctor-wrapper");
            fullHeightDiv.style.height = document.documentElement.scrollHeight + "px";
        </script>
    </div>
    <script src = '{% static "doctor.js" %}'></script>


{% endblock main_content%}